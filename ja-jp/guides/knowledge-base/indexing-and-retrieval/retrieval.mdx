---
title: 検索モード
version: '日本語'
---

ユーザーがナレッジベース Q&A タイプの AI アプリケーションを構築する際、アプリケーション内で複数のナレッジベースを関連付けている場合、Dify の検索戦略を適用して、どのナレッジベースからコンテンツを検索するかを決定する必要があります。

<Frame title="検索モードの設定">
  <img src="https://assets-docs.dify.ai/images/chat/rag-multiple.png" alt="検索モードの設定画面" />
</Frame>

### 検索設定

ユーザーの意図に基づいて、すべてのナレッジベースから同時に一致するものを検索し、複数のナレッジベースから関連するテキストを抽出します。その後、再ランク付けのステップを経て、複数の検索結果からユーザーの質問に最も適合する結果を選択します。この機能には Rerank モデル API の設定が必要です。

マルチパス検索モードでは、検索エンジンはアプリケーションに関連付けられたすべてのナレッジベースからユーザーの質問に関連するテキストコンテンツを検索します。複数のパスからの検索結果を統合し、Rerank モデルを使用して検索結果の文書に対して意味的な再ランク付けを行います。

マルチパス検索モードでは、Rerank モデルの設定を推奨します。詳細については[再ランク付け](/ja-jp/guides/knowledge-base/indexing-and-retrieval/rerank)をご覧ください。

以下は、マルチパス検索モードの技術フロー図です：

<Frame title="マルチパス検索">
  <img src="https://assets-docs.dify.ai/images/chat/rag-flow.png" alt="マルチパス検索の技術フロー" />
</Frame>

マルチパス検索モードは、モデルの推論能力やナレッジベースの説明に依存しないため、複数のナレッジベースでの検索時により高品質な検索結果を得ることができます。さらに、Rerank ステップを追加することで、文書の検索効果を効果的に改善できます。

そのため、複数のナレッジベースを関連付けたナレッジベース Q&A アプリケーションを作成する場合は、検索モードをマルチパス検索に設定することをお勧めします。