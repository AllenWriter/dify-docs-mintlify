---
title: MCP 服务器
description: 作者：Allen
---

## MCP 简介

Model Context Protocol (MCP) 是由 Anthropic 公司开发的开放标准协议，它为 AI 模型与外部工具和数据源之间的交互提供了标准化的接口。

你可以将 MCP 想象成 AI 模型的软件使用“USB 接口”，即通过标准协议访问和使用不同的工具或服务，极大地扩展 AI 的工具使用能力边界。

<Info>
  如需详细了解 MCP 协议，请参考 [Model Context Protocol](https://docs.anthropic.com/en/docs/agents-and-tools/mcp)。
</Info>

### Dify 与 MCP

Dify 平台支持通过 HTTP 协议集成 MCP 服务，使得开发者可以轻松地将各种外部 MCP 服务引入至现有 Dify 应用中。同时，Dify 也支持将工作流应用发布为 MCP 服务器供外部调用。详细说明请参考 [工作流 - 发布为 MCP 服务器](/zh-hans/guides/workflow/publish#发布为-mcp-服务器)。

### 使用 MCP 服务器作为工具的优势

<CardGroup cols={2}>
  <Card title="标准化集成" icon="puzzle-piece">
    使用统一的协议连接不同的工具和数据源，无需为每个工具开发自定义集成
  </Card>
  <Card title="能力扩展" icon="rocket">
    赋予 AI 模型访问外部工具、API 和数据的能力，扩展 Dify 应用功能边界
  </Card>
  <Card title="安全可控" icon="shield-halved">
    通过标准化的 MCP 服务授权，确保 AI 只能访问被授权的资源和服务
  </Card>
  <Card title="生态系统" icon="network-wired">
    利用丰富的开源 MCP 服务生态，快速集成各类功能至 Dify 应用内
  </Card>
</CardGroup>

## 添加 MCP 服务至工具

<Steps>
  <Step title="准备 MCP 服务器">
    你需要有一个可访问的 MCP 服务器，它可以是：
    - 自行开发的 MCP 服务
    - 开源社区提供的 MCP 服务
    - 第三方商业 MCP 服务
    
    确保目标 MCP 服务器支持 HTTP 传输协议，并已提供可公开访问的互联网链接。
  </Step>
  
  <Step title="配置 MCP 服务器">
    在 Dify 工作区中，导航至 **工具 → MCP** 页面，点击**添加 MCP 服务**按钮。
    
    <Frame>
      ![配置 MCP 服务](https://assets-docs.dify.ai/2025/05/abd1fc978ef989ea71b88c69a0fc4c30.png)
    </Frame>
    
    在配置表单中填写以下信息：
    - **名称和 Icon**：为 MCP 服务指定一个易于识别的名称和标识
    - **服务 URL**：MCP 服务的 HTTP 端点地址
  </Step>
  
  <Step title="授权并连接 MCP 服务器">
    部分 MCP 服务可能要求授权，按照页面提示完成验证。填写完配置信息后，Dify 将自动尝试连接到 MCP 服务并验证其可用性。成功连接后，系统会显示该 MCP 服务提供的工具和能力列表。
    
    ![](https://assets-docs.dify.ai/2025/05/85ee6ef84305cd751cafd56edc0b7ad9.png)

    配置完成后，你可以查看并调整 MCP 服务器内所提供的功能。对于不需要的功能，可以手动关闭。

    <Warning>
    如果连接验证失败，请检查你提供的 URL 和认证信息是否正确，以及 MCP 服务是否正常运行。
    </Warning>
  </Step>
</Steps>

## 在应用内使用 MCP 服务

MCP 服务配置完成后，你可以在 Dify 平台内的三种应用类型内通过工具进行调用：

- 在 **Chatflow** / **Workflow** 应用中，添加工具节点并选择 MCP 工具。

![](https://assets-docs.dify.ai/2025/05/f96f17ff4b7cf00e83159afd67cb7c7d.png)

- 在 **Agent** 应用中，将 MCP 工具添加到代理的可用工具集。
    
![](https://assets-docs.dify.ai/2025/05/34193da6529dce26577454ded841349a.png)

## 开发 MCP 服务器

开发 MCP 服务器有多种途径，你可以根据实际需求参考以下内容，选择不同的开发方式。

<CardGroup cols={2}>
  <Card title="将工作流应用发布为 MCP 服务器" icon="shuffle" href="/zh-hans/plugins/quick-start/develop-plugins/README">
    将 Dify 工作流应用直接发布为 MCP 服务器，这是最简单快捷的方式。
    
    点击访问 [工作流 - 发布为 MCP 服务器](/zh-hans/guides/workflow/publish-as-mcp)。
  </Card>
  
  <Card title="独立开发" icon="code" href="https://modelcontextprotocol.io/introduction">
    根据 MCP 协议规范从零开始开发自定义 MCP 服务器，提供更灵活的功能定制。
    
    点击访问 [MCP 官方文档](https://modelcontextprotocol.io/introduction)。
  </Card>
</CardGroup>

## 参考阅读

<CardGroup cols={2}>
  <Card title="MCP 官方文档" icon="book" href="https://modelcontextprotocol.io">
    全面了解 MCP 的概念、规范和最佳实践
  </Card>
  <Card title="MCP 服务示例库" icon="code" href="https://github.com/modelcontextprotocol/servers">
    探索各种开源 MCP 服务实现，加速你的开发
  </Card>
  <Card title="MCP Inspector" icon="magnifying-glass" href="https://modelcontextprotocol.io/docs/clients/inspector">
    用于测试和调试 MCP 服务的工具
  </Card>
</CardGroup>

---

{/*
Contributing Section
DO NOT edit this section!
It will be automatically generated by the script.
*/}

<CardGroup cols="2">
    <Card
        title="编辑此页面"
        icon="pen-to-square"
        href="https://github.com/langgenius/dify-docs-mintlify/edit/main/zh-hans/guides/tools/readme.mdx"
    >
        通过直接提交修改来帮助改进文档内容
    </Card>
    <Card
        title="提交问题"
        icon="github"
        href="https://github.com/langgenius/dify-docs-mintlify/issues/new?title=文档问题%3A%20&body=%23%23%20问题描述%0A%3C%21--%20请简要描述您发现的问题%20--%3E%0A%0A%23%23%20页面链接%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs-mintlify%2Fblob%2Fmain%2Fzh-hans/guides/tools%2Freadme.mdx%0A%0A%23%23%20建议修改%0A%3C%21--%20如果有具体的修改建议，请在此说明%20--%3E%0A%0A%3C%21--%20感谢您对文档质量的关注！%20--%3E"
    >
        发现错误或有改进建议？请提交问题反馈
    </Card>
</CardGroup>

